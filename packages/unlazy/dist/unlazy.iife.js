var UnLazy=function(o){var S;"use strict";const b="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",A=typeof window>"u",g=!A&&"loading"in HTMLImageElement.prototype,v=!A&&(!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));function E(e,t=document){return typeof e=="string"?[...t.querySelectorAll(e)]:e instanceof Element?[e]:[...e]}function w(e,t){let r;return function(...i){r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,e(...i)},t)}}function l(e='img[loading="lazy"]',{hash:t=!0,hashType:r="blurhash",placeholderSize:i=32,updateSizesOnResize:n=!1,onImageLoad:a}={}){const c=new Set;for(const s of E(e)){const p=d(s,{updateOnResize:n});if(n&&p&&c.add(p),!s.dataset.src&&!s.dataset.srcset){(typeof __UNLAZY_LOGGING__>"u"||__UNLAZY_LOGGING__)&&console.error("[unlazy] Missing `data-src` or `data-srcset` attribute",s);continue}if(v||!g){u(s,a);continue}if(s.src||(s.src=b),console.log(1699882775467,"image already in viewport",{image:s,complete:s.complete,naturalWidth:s.naturalWidth,boundingWidth:s.getBoundingClientRect().width}),s.complete&&s.naturalWidth>0){console.log(1699883770722,"load image directly",s),u(s,a);continue}const _=()=>u(s,a);s.addEventListener("load",_,{once:!0}),c.add(()=>s.removeEventListener("load",_))}return()=>{for(const s of c)s();c.clear()}}function h(e='img[data-sizes="auto"], source[data-sizes="auto"]'){for(const t of E(e))d(t)}function u(e,t){const r=new Image,{srcset:i,src:n,sizes:a}=e.dataset;if(a==="auto"){const c=L(e);c&&(r.sizes=`${c}px`)}else e.sizes&&(r.sizes=e.sizes);i&&(r.srcset=i),n&&(r.src=n),r.addEventListener("load",()=>{d(e),O(e),y(e),z(e),t==null||t(e)})}const f=new WeakMap;function d(e,t){var i;if(e.dataset.sizes!=="auto")return;const r=L(e);if(r&&(e.sizes=`${r}px`),((i=e.parentElement)==null?void 0:i.tagName.toLowerCase())==="picture"&&!(t!=null&&t.skipChildren)&&[...e.parentElement.getElementsByTagName("source")].forEach(n=>d(n,{skipChildren:!0})),t!=null&&t.updateOnResize){if(!f.has(e)){const n=w(()=>d(e),500),a=new ResizeObserver(n);f.set(e,a),a.observe(e)}return()=>{const n=f.get(e);n&&(n.disconnect(),f.delete(e))}}}function z(e){e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src"))}function y(e){e.dataset.srcset&&(e.srcset=e.dataset.srcset,e.removeAttribute("data-srcset"))}function O(e){const t=e.parentElement;(t==null?void 0:t.tagName.toLowerCase())==="picture"&&([...t.querySelectorAll("source[data-srcset]")].forEach(y),[...t.querySelectorAll("source[data-src]")].forEach(z))}function L(e){var t,r;return e instanceof HTMLSourceElement?(r=(t=e.parentElement)==null?void 0:t.getElementsByTagName("img")[0])==null?void 0:r.offsetWidth:e.offsetWidth}const R=Object.freeze({autoSizes:h,lazyLoad:l,loadImage:u});return(S=document.currentScript)!=null&&S.hasAttribute("init")&&l(),o.autoSizes=h,o.default=R,o.lazyLoad=l,o.loadImage=u,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),o}({});
