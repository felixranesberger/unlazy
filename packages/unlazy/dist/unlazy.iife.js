var UnLazy=function(o){var b;"use strict";const p="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",z=typeof window>"u",R=!z&&"loading"in HTMLImageElement.prototype,g=!z&&(!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));function S(e,t=document){return typeof e=="string"?[...t.querySelectorAll(e)]:e instanceof Element?[e]:[...e]}function T(e,t){let s;return function(...a){s&&clearTimeout(s),s=setTimeout(()=>{s=void 0,e(...a)},t)}}function l(e='img[loading="lazy"]',{hash:t=!0,hashType:s="blurhash",placeholderSize:a=32,updateSizesOnResize:n=!1,onImageLoad:c}={}){const i=new Set;for(const r of S(e)){const v=f(r,{updateOnResize:n});if(n&&v&&i.add(v),!r.dataset.src&&!r.dataset.srcset){console.error("[unlazy] Missing `data-src` or `data-srcset` attribute",r);continue}if(g||!R){y(r),E(r),A(r);continue}if(r.src||(r.src=p),r.complete&&r.naturalWidth>0){u(r,c);continue}const w=()=>u(r,c);r.addEventListener("load",w,{once:!0}),i.add(()=>r.removeEventListener("load",w))}return()=>{for(const r of i)r();i.clear()}}function h(e='img[data-sizes="auto"], source[data-sizes="auto"]'){for(const t of S(e))f(t)}function u(e,t){const s=new Image,{srcset:a,src:n,sizes:c}=e.dataset;if(c==="auto"){const i=L(e);i&&(s.sizes=`${i}px`)}else e.sizes&&(s.sizes=e.sizes);a&&(s.srcset=a),n&&(s.src=n),s.addEventListener("load",()=>{y(e),E(e),A(e),t==null||t(e)})}const d=new WeakMap;function f(e,t){var a;if(e.dataset.sizes!=="auto")return;const s=L(e);if(s&&(e.sizes=`${s}px`),((a=e.parentElement)==null?void 0:a.tagName.toLowerCase())==="picture"&&!(t!=null&&t.isRecursiveCall)&&[...e.parentElement.getElementsByTagName("source")].forEach(n=>f(n,{isRecursiveCall:!0})),t!=null&&t.updateOnResize){if(!d.has(e)){const n=T(()=>f(e),500),c=new ResizeObserver(n);d.set(e,c),c.observe(e)}return()=>{const n=d.get(e);n&&(n.disconnect(),d.delete(e))}}}function A(e){e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src"))}function E(e){e.dataset.srcset&&(e.srcset=e.dataset.srcset,e.removeAttribute("data-srcset"))}function y(e){const t=e.parentElement;(t==null?void 0:t.tagName.toLowerCase())==="picture"&&([...t.querySelectorAll("source[data-srcset]")].forEach(E),[...t.querySelectorAll("source[data-src]")].forEach(A))}function L(e){var t,s;return e instanceof HTMLSourceElement?(s=(t=e.parentElement)==null?void 0:t.getElementsByTagName("img")[0])==null?void 0:s.offsetWidth:e.offsetWidth}const C=Object.freeze({autoSizes:h,lazyLoad:l,loadImage:u});return(b=document.currentScript)!=null&&b.hasAttribute("init")&&l(),o.autoSizes=h,o.default=C,o.lazyLoad=l,o.loadImage=u,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),o}({});
