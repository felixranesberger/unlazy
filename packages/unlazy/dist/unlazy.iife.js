var UnLazy=function(a){var v;"use strict";const p="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",z=typeof window>"u",R=!z&&"loading"in HTMLImageElement.prototype,C=!z&&(!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));function h(e,t=document){return typeof e=="string"?[...t.querySelectorAll(e)]:e instanceof Element?[e]:[...e]}function T(e,t){let r;return function(...c){r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,e(...c)},t)}}function O(e){const{width:t}=e.getBoundingClientRect();return t>0?Promise.resolve():new Promise(r=>{const c=new ResizeObserver(()=>{const{width:n}=e.getBoundingClientRect();n>0&&(c.disconnect(),r())});c.observe(e)})}function l(e='img[loading="lazy"]',{hash:t=!0,hashType:r="blurhash",placeholderSize:c=32,updateSizesOnResize:n=!1,onImageLoad:o}={}){const i=new Set;return h(e).map(async s=>{await O(s);const y=f(s,{updateOnResize:n});if(n&&y&&i.add(y),!s.dataset.src&&!s.dataset.srcset){console.error("[unlazy] Missing `data-src` or `data-srcset` attribute",s);return}if(C||!R){b(s),E(s),A(s);return}if(s.src||(s.src=p),s.complete&&s.naturalWidth>0){u(s,o);return}const L=()=>u(s,o);s.addEventListener("load",L,{once:!0}),i.add(()=>s.removeEventListener("load",L))}),()=>{for(const s of i)s();i.clear()}}function w(e='img[data-sizes="auto"], source[data-sizes="auto"]'){for(const t of h(e))f(t)}function u(e,t){const r=new Image,{srcset:c,src:n,sizes:o}=e.dataset;if(o==="auto"){const i=S(e);i&&(r.sizes=`${i}px`)}else e.sizes&&(r.sizes=e.sizes);c&&(r.srcset=c),n&&(r.src=n),r.addEventListener("load",()=>{b(e),E(e),A(e),t==null||t(e)})}const d=new WeakMap;function f(e,t){var c;if(e.dataset.sizes!=="auto")return;const r=S(e);if(r&&(e.sizes=`${r}px`),((c=e.parentElement)==null?void 0:c.tagName.toLowerCase())==="picture"&&!(t!=null&&t.skipChildren)&&[...e.parentElement.getElementsByTagName("source")].forEach(n=>f(n,{skipChildren:!0})),t!=null&&t.updateOnResize){if(!d.has(e)){const n=T(()=>f(e),500),o=new ResizeObserver(n);d.set(e,o),o.observe(e)}return()=>{const n=d.get(e);n&&(n.disconnect(),d.delete(e))}}}function A(e){e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src"))}function E(e){e.dataset.srcset&&(e.srcset=e.dataset.srcset,e.removeAttribute("data-srcset"))}function b(e){const t=e.parentElement;(t==null?void 0:t.tagName.toLowerCase())==="picture"&&([...t.querySelectorAll("source[data-srcset]")].forEach(E),[...t.querySelectorAll("source[data-src]")].forEach(A))}function S(e){var t,r;return e instanceof HTMLSourceElement?(r=(t=e.parentElement)==null?void 0:t.getElementsByTagName("img")[0])==null?void 0:r.offsetWidth:e.offsetWidth}const P=Object.freeze({autoSizes:w,lazyLoad:l,loadImage:u});return(v=document.currentScript)!=null&&v.hasAttribute("init")&&l(),a.autoSizes=w,a.default=P,a.lazyLoad=l,a.loadImage=u,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),a}({});
